trigger:
    - main

pool:
    vmImage: 'ubuntu-latest'

variables:
    solutionDir: 'ECommerce'

steps:
    - task: UseDotNet@2
      inputs:
          packageType: 'sdk'
          version: '9.0.x'

    - script: dotnet restore
      displayName: 'dotnet restore'
      workingDirectory: $(solutionDir)

    - script: dotnet build --no-restore
      displayName: 'dotnet build'
      workingDirectory: $(solutionDir)

    - script: dotnet publish -o $(build.artifactStagingDirectory)
      displayName: 'dotnet publish -o $(build.artifactStagingDirectory)'
      workingDirectory: $(solutionDir)

    - task: PublishPipelineArtifact@1
      inputs:
          targetPath: '$(build.artifactStagingDirectory)'
          artifact: 'drop'
          publishLocation: 'pipeline'
